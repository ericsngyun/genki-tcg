# ============================================================================
# LOCAL DEVELOPMENT ENVIRONMENT
# ============================================================================
# Copy this file to .env for local backend development with Docker
# Use this when running: npm run dev:backend
#
# Quick Start:
# 1. cp .env.local.example .env
# 2. docker-compose -f ../../docker-compose.dev.yml up -d
# 3. npm run db:migrate
# 4. npm run db:seed
# 5. npm run dev:backend
#
# ⚠️  VALIDATION: All variables marked as REQUIRED are validated on startup.
#     The app will fail to start with clear error messages if any are missing/invalid.
# ============================================================================

# ============================================================================
# ENVIRONMENT
# ============================================================================
# Options: development | production | test
NODE_ENV="development"

# ============================================================================
# DATABASE (REQUIRED)
# ============================================================================
# PostgreSQL connection string (via Docker Compose or Railway)
# Format: postgresql://user:password@host:port/database
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/genki_tcg"

# Test database (optional - only needed for running tests)
# TEST_DATABASE_URL="postgresql://postgres:postgres@localhost:5432/genki_tcg_test"

# ============================================================================
# REDIS (REQUIRED)
# ============================================================================
# Redis connection string (via Docker Compose or Railway)
# Format: redis://host:port or rediss://host:port (for TLS)
REDIS_URL="redis://localhost:6379"

# ============================================================================
# JWT AUTHENTICATION (REQUIRED)
# ============================================================================
# JWT access token secret - MUST be cryptographically strong
# Generate with: openssl rand -base64 64
# ⚠️  CRITICAL: Replace the placeholder value with a real secret!
JWT_SECRET="REPLACE_WITH_SECURE_SECRET_GENERATED_BY_OPENSSL_RAND_BASE64_64"

# JWT access token expiration (default: 15m)
# Examples: 15m, 1h, 7d
JWT_EXPIRES_IN="15m"

# JWT refresh token secret - MUST be different from JWT_SECRET
# Generate with: openssl rand -base64 64
# ⚠️  CRITICAL: Replace the placeholder value with a real secret!
REFRESH_TOKEN_SECRET="REPLACE_WITH_DIFFERENT_SECURE_SECRET_GENERATED_BY_OPENSSL_RAND_BASE64_64"

# JWT refresh token expiration (default: 7d)
REFRESH_TOKEN_EXPIRES_IN="7d"

# ============================================================================
# DISCORD OAUTH (REQUIRED)
# ============================================================================
# Get these from: https://discord.com/developers/applications
# 1. Create a new application
# 2. Go to OAuth2 > General
# 3. Copy Client ID and Client Secret
# 4. Add redirect URLs (see below)

DISCORD_CLIENT_ID="1441953820820373639"
DISCORD_CLIENT_SECRET="your-discord-client-secret-from-portal"

# Comma-separated list of allowed OAuth redirect URLs
# Include all frontend URLs + mobile deep link
DISCORD_ALLOWED_REDIRECTS="http://localhost:3000,http://localhost:3001/auth/discord/callback,http://localhost:3001/auth/discord/mobile-callback,http://localhost:8081,genki-tcg://"

# ============================================================================
# API CONFIGURATION (OPTIONAL)
# ============================================================================
# Port for the API server (Railway uses PORT env var)
# If both are set, PORT takes precedence
API_PORT=3001
# PORT=3001  # Uncomment for Railway deployment

# Base URL for the API (used for callback URLs)
API_URL="http://localhost:3001"

# CORS allowed origins (comma-separated)
# Supports wildcards: https://*.vercel.app
CORS_ORIGINS="http://localhost:3000,http://localhost:8081,genki-tcg://"

# ============================================================================
# OBSERVABILITY (OPTIONAL)
# ============================================================================
# Sentry error tracking - Get from https://sentry.io
# Leave empty to disable error tracking
SENTRY_DSN=""
SENTRY_ORG=""
SENTRY_PROJECT=""

# ============================================================================
# ORGANIZATION (OPTIONAL)
# ============================================================================
# Default organization slug and invite code for new users
DEFAULT_ORG_SLUG="genki"
DEFAULT_INVITE_CODE="GENKI"

# ============================================================================
# EMAIL SERVICE (OPTIONAL - Will be required for production)
# ============================================================================
# SendGrid API key for sending transactional emails
# Get from: https://app.sendgrid.com/settings/api_keys
# Leave empty to disable email sending (password reset won't work)
# SENDGRID_API_KEY="SG.xxxxx"

# Email address to send from (must be verified in SendGrid)
# EMAIL_FROM="noreply@genkitcg.com"

# ============================================================================
# PUSH NOTIFICATIONS (OPTIONAL)
# ============================================================================
# Expo access token for sending push notifications
# Get from: https://expo.dev/accounts/[account]/settings/access-tokens
# Leave empty to disable push notifications
# EXPO_ACCESS_TOKEN="your-expo-access-token"
